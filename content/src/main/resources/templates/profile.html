<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default}">
<head><title>프로필</title></head>
<body>
<div layout:fragment="content">
    <div class="app-layout">
        <div class="main-content">
            <div id="profileCard"></div>

            <div class="profile-tabs" id="profileTabs">
                <button class="tab active" data-tab="posts">게시글</button>
                <button class="tab" data-tab="saved">저장됨</button>
            </div>

            <div id="postList"></div>
            <div class="loading-indicator hidden" id="loadingIndicator">로딩 중...</div>
            <div class="empty-state hidden" id="emptyState">아직 게시글이 없습니다.</div>
        </div>
    </div>

    <div class="profile-edit-overlay" id="editOverlay">
        <div class="profile-edit-modal">
            <h2>프로필 편집</h2>
            <div class="form-group">
                <label>이름</label>
                <input type="text" id="editName">
            </div>
            <div class="form-group">
                <label>핸들</label>
                <input type="text" id="editHandle" placeholder="@핸들">
            </div>
            <div class="form-group">
                <label>소개</label>
                <textarea id="editBio" placeholder="자기소개를 작성해주세요..."></textarea>
            </div>
            <div class="form-group">
                <label>프로필 사진</label>
                <input type="file" id="editImage" accept="image/*">
            </div>
            <div class="modal-actions">
                <button class="btn btn-outline" onclick="closeEditModal()">취소</button>
                <button class="btn btn-primary" onclick="saveProfile()">저장</button>
            </div>

            <div class="danger-zone" id="changePasswordSection">
                <h3>비밀번호 변경</h3>
                <div id="passwordMsg" class="success-message"></div>
                <div id="passwordError" class="error-message"></div>
                <div class="form-group">
                    <label>현재 비밀번호</label>
                    <input type="password" id="currentPassword" placeholder="현재 비밀번호">
                </div>
                <div class="form-group">
                    <label>새 비밀번호</label>
                    <input type="password" id="newPassword" placeholder="새 비밀번호">
                </div>
                <div class="form-group">
                    <label>새 비밀번호 확인</label>
                    <input type="password" id="confirmNewPassword" placeholder="새 비밀번호 확인">
                </div>
                <button class="btn btn-primary btn-sm" onclick="changePassword()">비밀번호 변경</button>
            </div>

            <div class="danger-zone" id="deleteAccountSection">
                <h3>계정 삭제</h3>
                <p style="font-size:13px;color:var(--text-secondary);margin-bottom:12px;">
                    이 작업은 되돌릴 수 없습니다. 모든 데이터가 삭제됩니다.
                </p>
                <div id="deleteError" class="error-message"></div>
                <div class="form-group">
                    <label>비밀번호를 입력하여 확인</label>
                    <input type="password" id="deletePassword" placeholder="비밀번호">
                </div>
                <button class="btn btn-danger btn-sm" onclick="deleteAccount()">계정 삭제</button>
            </div>
        </div>
    </div>

    <script src="/js/profile.js"></script>
</div>
</body>
</html>
